#!/bin/bash
#
#
# call this every minute from cron to always have a timesync running
# crontab example: * * * * * /home/linaro/realtime/externals/timesync/cronTimesync "/home/linaro/realtime/externals/timesync/build/bin/timesync -s -p 10000"
#
# or for the master"
# /home/abarry/plane/realtime/externals/timesync/cronTimesync "/home/abarry/plane/realtime/externals/timesync/build/bin/timesync -m"


# check for command line arguments
if (( $# < 1 ))
then
    echo "Error: not enough arguments"
    echo "useage: ./cronTimesync [timesync command]"
    echo "example: ./cronTimesync \"/home/linaro/realtime/externals/timesync/build/bin/timesync -s\""
    exit
fi

# check for existing timesync
if [ `ps -A|grep timesync |wc -l` = 0 ]
then
    echo "Found no timesyncs, starting one..."
    $1 &
fi

